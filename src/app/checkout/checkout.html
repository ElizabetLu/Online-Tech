<section>
  <div class="header">
    <button class="back" (click)="back()">‚Üê Back</button>
    <h1>Checkout</h1>
  </div>

  <div class="checkout-container">
    <div class="checkout-main">
      <div class="product-details">
        <h2>Product Details</h2>
        <div class="product-list" *ngIf="cartItems && cartItems.length > 0">
          <div *ngFor="let item of cartItems" class="product-item" (click)="viewProductDetails(item.product)" style="cursor: pointer;">
            <img [src]="item.product.thumbnail" [alt]="item.product.title" />
            <div class="item-info">
              <h4>{{ capitalizeTitle(item.product.title) }}</h4>
              <p>Quantity: {{ item.quantity }}</p>
              <p class="price">{{ item.product.price.current }} {{ item.product.price.currency }}</p>
            </div>
          </div>
        </div>
        <div *ngIf="!cartItems || cartItems.length === 0" class="empty-message">
          <p>No items in cart</p>
        </div>
      </div>

      <div class="shipping-methods">
        <h2>Shipping Methods</h2>
        <div class="method-options">
          <label class="method-option">
            <input type="radio" name="shippingMethod" value="standard" [(ngModel)]="shippingMethod" (change)="calculateTotal()" />
            <span>Standard Shipping (5-7 days) - 15 GEL</span>
          </label>
          <label class="method-option">
            <input type="radio" name="shippingMethod" value="express" [(ngModel)]="shippingMethod" (change)="calculateTotal()" />
            <span>Express Shipping (2-3 days) - 30 GEL</span>
          </label>
          <label class="method-option">
            <input type="radio" name="shippingMethod" value="overnight" [(ngModel)]="shippingMethod" (change)="calculateTotal()" />
            <span>Overnight Shipping - 50 GEL</span>
          </label>
        </div>
      </div>

      <div class="payment-methods">
        <h2>Payment Methods</h2>
        <div class="method-options">
          <label class="method-option">
            <input type="radio" name="paymentMethod" value="card" [(ngModel)]="paymentMethod" />
            <span>Credit/Debit Card</span>
          </label>
          <label class="method-option">
            <input type="radio" name="paymentMethod" value="paypal" [(ngModel)]="paymentMethod" />
            <span>PayPal</span>
          </label>
          <label class="method-option">
            <input type="radio" name="paymentMethod" value="cash" [(ngModel)]="paymentMethod" />
            <span>Cash on Delivery</span>
          </label>
        </div>
      </div>
    </div>

    <div class="order-summary">
      <h2>Total Price</h2>
      <div class="summary-totals">
        <div class="total-row">
          <span>Subtotal:</span>
          <span>{{ subtotal | number: '1.2-2' }} {{ getCurrency() }}</span>
        </div>
        <div class="total-row">
          <span>Shipping:</span>
          <span>{{ shipping | number: '1.2-2' }} GEL</span>
        </div>
        <div class="total-row total">
          <span>Total:</span>
          <span>{{ total | number: '1.2-2' }} {{ getCurrency() }}</span>
        </div>
      </div>

      <button 
        class="submit-order-btn" 
        (click)="placeOrder()" 
        [disabled]="!paymentMethod || !shippingMethod || !cartItems || cartItems.length === 0"
      >
        Submit Order
      </button>
    </div>
  </div>

  <button class="scroll-btn" (click)="handleScroll()" [class.scroll-up]="!isScrollingDown">
  <span class="arrow-icon">
    <i [class]="isScrollingDown ? 'fa fa-chevron-down' : 'fa fa-chevron-up'"></i>
  </span>
</button>
</section>