<section>
  <div class="header">
    <button class="back" (click)="back()">‚Üê Back</button>
    <h1>Sign In</h1>
  </div>

  <div class="signin-container">
    <form class="signin-form" (ngSubmit)="signin(signinForm)" #signinForm="ngForm">
      <div class="form-group">
        <label class="form-label">Email</label>
        <input
          type="email"
          name="email"
          [(ngModel)]="credentials.email"
          required
          email
          #email="ngModel"
          [ngClass]="{
            success: email.touched && email.valid,
            error: email.touched && email.invalid
          }"
          placeholder="example@email.com"
        />
        <span class="error-message" *ngIf="email.touched && email.errors?.['required']">Email is required</span>
        <span class="error-message" *ngIf="email.touched && email.errors?.['email']">Enter a valid email address</span>
      </div>

      <div class="form-group">
        <label class="form-label">Password</label>
        <div class="password-wrapper">
          <input
            [type]="showPassword ? 'text' : 'password'"
            name="password"
            [(ngModel)]="credentials.password"
            required
            minlength="8"
            #password="ngModel"
            [ngClass]="{
              success: password.touched && password.valid,
              error: password.touched && password.invalid
            }"
            placeholder="Min 8 characters"
          />
          <button type="button" class="toggle-password" (click)="showPassword = !showPassword">
            <i [class]="showPassword ? 'fa fa-eye' : 'fa fa-eye-slash'"></i>
          </button>
        </div>
        <span class="error-message" *ngIf="password.touched && password.errors?.['required']">Password is required</span>
        <span class="error-message" *ngIf="password.touched && password.errors?.['minlength']">Password must be at least 8 characters</span>
      </div>

      <div class="forgot-password-link">
        <a (click)="openForgotPasswordModal()">Forgot Password?</a>
      </div>

      <button type="submit" class="submit-btn" [disabled]="signinForm.invalid">Sign In</button>

      <p class="register-link">
        Don't have an account? <a routerLink="/registration">Register here</a>
      </p>
    </form>
  </div>

  <button class="scroll-btn" (click)="handleScroll()" [class.scroll-up]="!isScrollingDown">
    <span class="arrow-icon">
      <i [class]="isScrollingDown ? 'fa fa-chevron-down' : 'fa fa-chevron-up'"></i>
    </span>
  </button>
</section>

<div class="modal" *ngIf="showForgotPasswordModal" (click)="closeForgotPasswordModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <h2>Reset Password</h2>
    <form (ngSubmit)="sendPasswordRecovery(forgotPasswordForm)" #forgotPasswordForm="ngForm">
      <div class="form-group">
        <label class="form-label">Email</label>
        <input
          type="email"
          name="recoveryEmail"
          [(ngModel)]="recoveryEmail"
          required
          email
          #recoveryEmailInput="ngModel"
          [ngClass]="{
            success: recoveryEmailInput.touched && recoveryEmailInput.valid,
            error: recoveryEmailInput.touched && recoveryEmailInput.invalid
          }"
          placeholder="Enter your email"
        />
        <span class="error-message" *ngIf="recoveryEmailInput.touched && recoveryEmailInput.errors?.['required']">Email is required</span>
        <span class="error-message" *ngIf="recoveryEmailInput.touched && recoveryEmailInput.errors?.['email']">Enter a valid email</span>
      </div>
      <div class="modal-actions">
        <button type="submit" class="btn btn-primary" [disabled]="forgotPasswordForm.invalid">Send Recovery Email</button>
        <button type="button" class="btn btn-secondary" (click)="closeForgotPasswordModal()">Cancel</button>
      </div>
    </form>
  </div>
</div>